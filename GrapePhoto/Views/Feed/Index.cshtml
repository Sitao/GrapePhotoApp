
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - GrapePhoto</title>
    <link href="~/Content/Site.css" rel="stylesheet" type="text/css" />
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <script src="~/Scripts/modernizr-2.6.2.js"></script>
    <script src="https://js.pusher.com/4.2/pusher.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
    <link href="http://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" rel="stylesheet" />

    <style type="text/css">
        .feed {
            padding: 2px 10px;
            background-color: #6c757d;
            margin: 4px;
            color: aliceblue;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <span id="username">liucao</span>

    <script>
        const pusher = new Pusher('c5705e0b64eddb898170', {
            cluster: 'ap1'
        });
        const channel = pusher.subscribe('feed');
        channel.bind('new_feed', function (data) {

            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": false,
                "progressBar": false,
                "positionClass": "toast-bottom-right",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "500",
                "hideDuration": "1000",
                "timeOut": "5000",
                "extendedTimeOut": "1000",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            };
            var username = document.getElementById("username").innerText;
            if (`${data.Followers}`.indexOf(username) > -1) {
                var m = `${data.ImageUrl}`;
                var b = `This is a message <img src=\"${m}\"/>`;
                toastr.info(b, " ");
            }
        });
    </script>


</body>
</html>
