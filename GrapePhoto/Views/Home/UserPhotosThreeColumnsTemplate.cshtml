@using GrapePhoto.Proxy
@inject IAccountClient userManager
@model PostViewModel
@{
    Layout = null;
    var user = userManager.GetUserByUserId(User.Identity.Name);
    var hasAvatar = !string.IsNullOrEmpty(user?.AvatarPicUrl);
    var nameCaptialLetter = user?.UserId.Substring(0, 2).ToUpper();
}
<div class="col-sm-6 col-lg-4">
    <div class="card">
        <a href="@Model.Picture.Src" class="mb-0">
            <img src="@Model.Picture.ThumbnailSrc" alt="@Model.Picture.AltAttribute" width="100%">
        </a>
        <div class="d-flex align-items-center p-3">
            @if (hasAvatar)
            {
                <span class="avatar" style="background-image: url('@user.AvatarPicUrl' )">
                  
                </span>
            }
            else
            {
                <span class="avatar avatar-azure mr-3">@nameCaptialLetter</span>
            }
                 
                    <div>
                        <div>@Model.User.UserId</div>
                        <small class="d-block text-muted">@Model.Picture.PostDate.ToFriendlyDateTime()</small>
                    </div>
                    <div class="ml-auto text-muted">
                        <a href="javascript:void(0)" class="icon d-none d-md-inline-block ml-3"><i class="fe fe-heart mr-1"></i> 0</a>
                    </div>
             
        </div>
    </div>
</div>

